# 個人資產視覺化系統 - 使用說明

## 📋 系統簡介

這是一個完整的個人資產管理系統，包含：
- **Python 資料產生器**：互動式輸入並產生 CSV 資料
- **HTML 視覺化儀表板**：美觀的圖表與表格展示

---

## 🚀 快速開始

### 1. 環境需求
- Python 3.7 或更高版本
- 任何現代瀏覽器 (Chrome、Firefox、Edge、Safari)

### 2. 檔案結構
```
資產視覺化/
├── README.md                  # 本說明文件
├── account_list.txt           # 銀行帳戶清單
├── stock_list.txt             # 股票清單
├── asset_data_manager.py      # 主程式入口
├── index.html                 # 儀表板網頁
├── modules/                   # Python 模組資料夾
│   ├── __init__.py
│   ├── bank_asset_generator.py
│   ├── stock_holding_generator.py
│   └── realized_pnl_generator.py
└── output/                    # CSV 輸出資料夾
    └── (產生的 CSV 檔案)
```

---

## 📝 使用步驟

### Step 1: 設定帳戶和股票清單

#### 編輯 `account_list.txt`
在檔案中每行輸入一個銀行帳戶名稱，例如：
```
台銀
富邦
國泰世華
```

#### 編輯 `stock_list.txt`
格式：`市場,股票代號,股票名稱`，例如：
```
台股,2330,台積電
台股,2317,鴻海
美股,AAPL,蘋果
ETF,919,群益台灣精選高息
```

### Step 2: 產生資料

#### 方法一：使用統一管理介面（推薦）
```bash
python asset_data_manager.py
```

執行後會出現選單：
```
==================================
💰 個人資產資料管理系統
==================================
1. 🏦 輸入銀行資產資料
2. 📈 輸入股票庫存資料
3. 💸 輸入已實現損益資料
4. 🚀 一次輸入全部 (依序)
0. 🚪 離開
==================================
```

選擇對應功能後，依照提示輸入資料。

#### 方法二：個別執行（進階）
```bash
python modules/bank_asset_generator.py
python modules/stock_holding_generator.py
python modules/realized_pnl_generator.py
```

### Step 3: 檢視儀表板

1. 用瀏覽器開啟 `index.html`
2. 點擊「選擇檔案」上傳剛才產生的 CSV 檔案
   - 📁 銀行資產 CSV → 上傳 `output/YYYYMMDD_bank_assets.csv`
   - 📊 股票庫存 CSV → 上傳 `output/YYYYMMDD_stock_holdings.csv`
   - 💰 已實現損益 CSV → 上傳 `output/YYYYMMDD_realized_pnl.csv`
3. 切換分頁查看不同的資料視覺化

---

## 🎯 功能說明

### 個人資產頁面
- **總銀行資產**：顯示所有帳戶的總金額
- **資產分佈圓餅圖**：各帳戶的金額比例
- **資產歷史趨勢**：總資產隨時間變化的折線圖

### 股票庫存頁面
- **總市值**：所有持股的總市值
- **未實現損益**：目前帳面上的盈虧（綠色/紅色標示）
- **持股分佈圓餅圖**：各股票的市值比例
- **持股明細表格**：詳細的持股資訊

### 已實現損益頁面
- **總已實現損益**：已賣出交易的總損益（綠色/紅色標示）
- **總賣出價與總成本**：賣出總金額與成本
- **損益分佈圓餅圖**：盈利交易 vs 虧損交易的比例
- **交易明細表格**：詳細的交易紀錄

---

## 💡 資料輸入範例

### 銀行資產
```
日期 (YYYYMMDD): 20260120
帳戶名稱: 台銀
金額: 50000
```

### 股票庫存
```
日期 (YYYYMMDD): 20260120
選擇股票 (輸入編號或代號): 2330
持有股數: 10
總成本: 6000
總市值: 6500
```
→ 系統會自動計算：未實現損益 = +500，報酬率% = +8.33%

### 已實現損益
```
日期 (YYYYMMDD): 20260120
選擇股票 (輸入編號或代號): 2317
賣出股數: 5
總成本: 500
賣出價: 550
```
→ 系統會自動計算：已實現損益 = +50，報酬率% = +10%

---

## ❓ 常見問題

### Q1: 網頁顯示「缺少必要元件」？
**A**: 這是網路問題導致 CDN 無法載入。請確認網路連線正常，或稍後再試。

### Q2: 上傳 CSV 後卡在「讀取中...」？
**A**: 請確認：
1. CSV 檔案格式正確（由 Python 程式產生）
2. 重新整理網頁後再試
3. 使用最新版的瀏覽器

### Q3: 如何輸入多筆同一天的資料？
**A**: 在 Python 程式中，輸入完一筆後選擇「繼續輸入」（同日期），即可新增多筆。

### Q4: 圓餅圖上的小項目看不到怎麼辦？
**A**: 系統會自動隱藏占比太小的標籤（<3% 或 <5%）。可以用滑鼠移到圖上查看 Tooltip。

### Q5: 如何修改歷史資料？
**A**: 直接編輯 `output/` 資料夾中的 CSV 檔案，然後重新上傳到網頁。

### Q6: 資料日期格式是什麼？
**A**: 必須是 `YYYYMMDD` 格式（例如：20260120），不可使用其他格式。

---

## 🛠 技術支援

### 檔案編碼注意事項
- 所有 CSV 檔案使用 **UTF-8-sig** 編碼
- 如果用 Excel 開啟 CSV，儲存時請選擇「UTF-8 CSV」

### 系統限制
- 僅讀取最新日期的資料進行視覺化
- 圓餅圖最多顯示 10 種顏色（若超過會重複使用）
- 建議 CSV 檔案不要超過 1000 筆資料（網頁效能考量）

---

## 📧 問題回報

如有任何問題或建議，請回報給開發者。

---

**最後更新**: 2026-01-20  
**版本**: 1.0
